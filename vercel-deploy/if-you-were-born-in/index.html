<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>If You Were Born In… — A Life Reimagined | whatifs.fun</title>
<meta name="description" content="Explore how your life might change across different years and countries. See projected life expectancy, historical events, economic conditions, and technological milestones.">
<meta property="og:title" content="If You Were Born In… — whatifs.fun">
<meta property="og:description" content="A life reimagined across time and place. Choose a birth year and country to simulate your life trajectory.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://whatifs.fun/if-you-were-born-in/">
<link rel="canonical" href="https://whatifs.fun/if-you-were-born-in/">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-13KHBC5TPS"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-13KHBC5TPS');</script>
<script type="application/ld+json">{"@context":"https://schema.org","@type":"WebApplication","name":"If You Were Born In…","description":"Explore how your life might change across different years and countries.","url":"https://whatifs.fun/if-you-were-born-in/","applicationCategory":"EducationalApplication","operatingSystem":"Any","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"inLanguage":"en","isPartOf":{"@type":"WebSite","name":"whatifs.fun","url":"https://whatifs.fun/"}}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
--bg:#F6F7F9;--bg2:#FFFFFF;--bg3:#EEF0F4;
--text:#1A1D23;--text2:#4A4E57;--text3:#8A8E96;--text4:#B4B8C0;
--accent:#3B7DD8;--accent-light:#E8F0FB;--accent-pale:#F2F7FD;
--teal:#2BA5A0;--teal-light:#E6F6F5;
--amber:#D4912A;--amber-light:#FDF3E3;
--rose:#C74B50;--rose-light:#FCEAEB;
--border:#E2E4E9;--border-light:#EDEEF2;
--card:#FFFFFF;--card-shadow:0 1px 3px rgba(0,0,0,0.04),0 4px 16px rgba(0,0,0,0.03);
--radius:12px;--radius-sm:8px;
}
html{scroll-behavior:smooth;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent}
body{background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;font-weight:400;font-size:15px;line-height:1.6}
h1,h2,h3{font-family:'Instrument Serif',serif;font-weight:400}
.container{max-width:760px;margin:0 auto;padding:0 24px}

/* ===== INTRO ===== */
#intro{min-height:100vh;min-height:100dvh;display:flex;align-items:center;justify-content:center;padding:40px 24px;position:relative;overflow:hidden}
#intro::before{content:'';position:absolute;top:-20%;right:-15%;width:500px;height:500px;background:radial-gradient(circle,rgba(59,125,216,0.06) 0%,transparent 70%);border-radius:50%;pointer-events:none}
#intro::after{content:'';position:absolute;bottom:-10%;left:-10%;width:400px;height:400px;background:radial-gradient(circle,rgba(43,165,160,0.05) 0%,transparent 70%);border-radius:50%;pointer-events:none}
.intro-inner{max-width:580px;text-align:center;position:relative;z-index:1}
.intro-label{font-size:0.7rem;font-weight:600;text-transform:uppercase;letter-spacing:3px;color:var(--accent);margin-bottom:20px;opacity:0;animation:fadeUp 0.8s ease 0.2s forwards}
.intro-title{font-size:clamp(2.4rem,6vw,3.6rem);line-height:1.15;color:var(--text);margin-bottom:12px;opacity:0;animation:fadeUp 0.8s ease 0.35s forwards}
.intro-title em{font-style:italic;color:var(--accent)}
.intro-subtitle{font-family:'Instrument Serif',serif;font-size:clamp(1.05rem,2.5vw,1.25rem);color:var(--text3);font-style:italic;margin-bottom:28px;opacity:0;animation:fadeUp 0.8s ease 0.5s forwards}
.intro-desc{font-size:0.92rem;color:var(--text2);line-height:1.7;max-width:480px;margin:0 auto 40px;opacity:0;animation:fadeUp 0.8s ease 0.65s forwards}
.intro-inputs{display:flex;flex-direction:column;gap:20px;max-width:420px;margin:0 auto 32px;opacity:0;animation:fadeUp 0.8s ease 0.8s forwards}
.input-group{text-align:left}
.input-label{font-size:0.72rem;font-weight:600;text-transform:uppercase;letter-spacing:1.5px;color:var(--text3);margin-bottom:8px;display:flex;justify-content:space-between;align-items:baseline}
.input-label .year-display{font-family:'Instrument Serif',serif;font-size:1.4rem;color:var(--text);letter-spacing:0;text-transform:none;font-weight:400}
.year-slider{width:100%;-webkit-appearance:none;appearance:none;height:3px;background:var(--border);border-radius:4px;outline:none;cursor:pointer;touch-action:none}
.year-slider::-webkit-slider-thumb{-webkit-appearance:none;width:22px;height:22px;border-radius:50%;background:var(--accent);cursor:pointer;box-shadow:0 2px 8px rgba(59,125,216,0.3);transition:transform 0.15s}
.year-slider::-webkit-slider-thumb:hover{transform:scale(1.15)}
.year-slider::-moz-range-thumb{width:22px;height:22px;border-radius:50%;background:var(--accent);cursor:pointer;border:none;box-shadow:0 2px 8px rgba(59,125,216,0.3)}
.country-select{width:100%;padding:14px 16px;border:1.5px solid var(--border);border-radius:var(--radius-sm);font-family:'DM Sans',sans-serif;font-size:0.95rem;color:var(--text);background:var(--bg2);outline:none;cursor:pointer;transition:border-color 0.2s;-webkit-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' fill='none'%3E%3Cpath d='M1 1.5l5 5 5-5' stroke='%238A8E96' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 16px center}
.country-select:focus{border-color:var(--accent)}
.simulate-btn{width:100%;max-width:420px;padding:16px 32px;background:var(--text);color:#fff;border:none;border-radius:var(--radius-sm);font-family:'DM Sans',sans-serif;font-size:0.95rem;font-weight:600;letter-spacing:0.5px;cursor:pointer;transition:all 0.25s;opacity:0;animation:fadeUp 0.8s ease 0.95s forwards}
.simulate-btn:hover{background:#2d3038;transform:translateY(-1px);box-shadow:0 4px 16px rgba(0,0,0,0.12)}
.simulate-btn:active{transform:translateY(0)}
.intro-footer{position:absolute;bottom:24px;left:50%;transform:translateX(-50%);font-size:0.75rem;color:var(--text4)}
.intro-footer a{color:var(--text3);text-decoration:none}

/* ===== RESULTS ===== */
#results{display:none;padding:0 0 80px;min-height:100vh}
#results.active{display:block}
.results-header{padding:48px 24px 40px;text-align:center;border-bottom:1px solid var(--border-light)}
.results-back{display:inline-flex;align-items:center;gap:6px;font-size:0.8rem;font-weight:500;color:var(--text3);text-decoration:none;cursor:pointer;margin-bottom:24px;transition:color 0.2s;border:none;background:none;font-family:'DM Sans',sans-serif}
.results-back:hover{color:var(--text)}
.results-scenario{font-family:'Instrument Serif',serif;font-size:clamp(1.6rem,4vw,2.4rem);line-height:1.3;color:var(--text);margin-bottom:8px}
.results-scenario em{font-style:italic;color:var(--accent)}
.results-note{font-size:0.8rem;color:var(--text4);margin-top:8px}

/* ===== SECTION ===== */
.section{padding:48px 24px}
.section+.section{border-top:1px solid var(--border-light)}
.section-title{font-family:'Instrument Serif',serif;font-size:clamp(1.3rem,3vw,1.7rem);color:var(--text);margin-bottom:24px;text-align:center}
.section-subtitle{font-size:0.85rem;color:var(--text3);text-align:center;margin-top:-16px;margin-bottom:28px}

/* ===== STAT CARDS ===== */
.stat-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;max-width:760px;margin:0 auto}
.stat-card{background:var(--card);border:1px solid var(--border-light);border-radius:var(--radius);padding:24px 20px;text-align:center;transition:box-shadow 0.25s}
.stat-card:hover{box-shadow:var(--card-shadow)}
.stat-value{font-family:'Instrument Serif',serif;font-size:2.2rem;color:var(--text);line-height:1.1;margin-bottom:4px}
.stat-unit{font-size:0.8rem;color:var(--text3);font-weight:500}
.stat-label{font-size:0.75rem;color:var(--text4);text-transform:uppercase;letter-spacing:1.2px;font-weight:600;margin-top:10px}
.stat-card.accent .stat-value{color:var(--accent)}
.stat-card.teal .stat-value{color:var(--teal)}

/* ===== TIMELINE ===== */
.timeline-container{max-width:760px;margin:0 auto;position:relative}
.timeline-scroll{overflow-x:auto;padding:20px 0 30px;-webkit-overflow-scrolling:touch;scrollbar-width:thin;scrollbar-color:var(--border) transparent}
.timeline-scroll::-webkit-scrollbar{height:4px}
.timeline-scroll::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}
.timeline{display:flex;position:relative;min-width:max-content;padding:0 40px;align-items:flex-end}
.timeline::before{content:'';position:absolute;bottom:60px;left:40px;right:40px;height:1.5px;background:var(--border)}
.timeline-item{display:flex;flex-direction:column;align-items:center;min-width:120px;padding:0 8px;position:relative;cursor:default}
.timeline-marker{width:8px;height:8px;border-radius:50%;background:var(--border);margin-bottom:8px;position:relative;z-index:2;transition:all 0.2s}
.timeline-item:hover .timeline-marker{background:var(--accent);transform:scale(1.4);box-shadow:0 0 0 4px var(--accent-light)}
.timeline-item.war .timeline-marker{background:var(--rose)}
.timeline-item.tech .timeline-marker{background:var(--teal)}
.timeline-item.econ .timeline-marker{background:var(--amber)}
.timeline-item.life .timeline-marker{background:var(--accent)}
.timeline-year{font-size:0.7rem;font-weight:600;color:var(--text3);margin-bottom:4px;white-space:nowrap}
.timeline-event{font-size:0.72rem;color:var(--text2);max-width:110px;text-align:center;line-height:1.35;white-space:normal;min-height:40px;display:flex;align-items:flex-end;justify-content:center;opacity:0.7;transition:opacity 0.2s}
.timeline-item:hover .timeline-event{opacity:1}
.timeline-birth{position:absolute;bottom:52px;font-size:0.65rem;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--accent);white-space:nowrap}
.timeline-legend{display:flex;gap:20px;justify-content:center;margin-top:12px;flex-wrap:wrap}
.timeline-legend span{display:flex;align-items:center;gap:5px;font-size:0.7rem;color:var(--text3)}
.timeline-legend span::before{content:'';width:7px;height:7px;border-radius:50%}
.legend-war::before{background:var(--rose) !important}
.legend-tech::before{background:var(--teal) !important}
.legend-econ::before{background:var(--amber) !important}
.legend-life::before{background:var(--accent) !important}

/* ===== PROBABILITY BARS ===== */
.prob-list{max-width:560px;margin:0 auto;display:flex;flex-direction:column;gap:18px}
.prob-item{display:flex;flex-direction:column;gap:6px}
.prob-header{display:flex;justify-content:space-between;align-items:baseline}
.prob-label{font-size:0.85rem;color:var(--text2);font-weight:500}
.prob-value{font-family:'Instrument Serif',serif;font-size:1.1rem;color:var(--text)}
.prob-track{height:4px;background:var(--bg3);border-radius:4px;overflow:hidden}
.prob-fill{height:100%;border-radius:4px;transition:width 1.2s cubic-bezier(.25,.46,.45,.94);width:0}
.prob-fill.blue{background:var(--accent)}
.prob-fill.teal{background:var(--teal)}
.prob-fill.amber{background:var(--amber)}
.prob-fill.rose{background:var(--rose)}

/* ===== COMPARISON ===== */
.compare-container{max-width:660px;margin:0 auto}
.compare-controls{display:flex;flex-direction:column;gap:16px;margin-bottom:28px;padding:20px;background:var(--bg);border-radius:var(--radius);border:1px solid var(--border-light)}
.compare-row{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.compare-label{font-size:0.82rem;color:var(--text2);font-weight:500;min-width:180px}
.compare-select{padding:8px 12px;border:1px solid var(--border);border-radius:6px;font-family:'DM Sans',sans-serif;font-size:0.85rem;color:var(--text);background:var(--bg2);outline:none;cursor:pointer;-webkit-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%238A8E96' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center;padding-right:28px}
.compare-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.compare-card{background:var(--card);border:1px solid var(--border-light);border-radius:var(--radius-sm);padding:18px 16px;text-align:center}
.compare-card-label{font-size:0.68rem;text-transform:uppercase;letter-spacing:1px;font-weight:600;color:var(--text4);margin-bottom:8px}
.compare-card-value{font-family:'Instrument Serif',serif;font-size:1.5rem;color:var(--text)}
.compare-card-diff{font-size:0.75rem;font-weight:600;margin-top:4px}
.diff-positive{color:var(--teal)}
.diff-negative{color:var(--rose)}
.diff-neutral{color:var(--text4)}

/* ===== REFLECTION ===== */
.reflection{max-width:520px;margin:0 auto;text-align:center}
.reflection-list{list-style:none;display:flex;flex-direction:column;gap:10px;margin:24px 0 32px}
.reflection-item{font-size:0.95rem;color:var(--text2);padding:12px 20px;background:var(--bg);border-radius:var(--radius-sm);border-left:3px solid var(--border)}
.reflection-item strong{color:var(--text);font-weight:600}
.reflection-quote{font-family:'Instrument Serif',serif;font-size:1.15rem;font-style:italic;color:var(--text3);margin-bottom:32px;line-height:1.6}
.restart-btn{display:inline-flex;align-items:center;gap:6px;padding:14px 32px;background:var(--text);color:#fff;border:none;border-radius:var(--radius-sm);font-family:'DM Sans',sans-serif;font-size:0.9rem;font-weight:600;cursor:pointer;transition:all 0.25s;margin-right:12px}
.restart-btn:hover{background:#2d3038;transform:translateY(-1px)}
.share-btn{display:inline-flex;align-items:center;gap:6px;padding:14px 32px;background:var(--bg);color:var(--text2);border:1.5px solid var(--border);border-radius:var(--radius-sm);font-family:'DM Sans',sans-serif;font-size:0.9rem;font-weight:600;cursor:pointer;transition:all 0.25s}
.share-btn:hover{border-color:var(--text3);color:var(--text)}

/* ===== ANIMATIONS ===== */
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.reveal{opacity:0;transform:translateY(20px);transition:opacity 0.6s ease,transform 0.6s ease}
.reveal.visible{opacity:1;transform:translateY(0)}
.counter-animate{transition:all 0.8s cubic-bezier(.25,.46,.45,.94)}

/* ===== RESPONSIVE ===== */
@media(max-width:600px){
    #intro{padding:28px 18px;min-height:auto;min-height:100dvh}
    .intro-inner{max-width:100%}
    .intro-desc{font-size:0.85rem;margin-bottom:28px}
    .intro-inputs{max-width:100%;gap:18px;margin-bottom:24px}
    .simulate-btn{max-width:100%}
    .intro-footer{position:relative;bottom:auto;left:auto;transform:none;margin-top:24px}
    .stat-grid{grid-template-columns:1fr 1fr;gap:10px}
    .stat-card{padding:18px 14px}
    .stat-value{font-size:1.8rem}
    .compare-grid{grid-template-columns:1fr 1fr;gap:10px}
    .compare-card{padding:14px 12px}
    .compare-card-value{font-size:1.2rem}
    .compare-row{flex-direction:column;align-items:flex-start;gap:6px}
    .compare-select{width:100%}
    .section{padding:32px 16px}
    .section-title{font-size:1.3rem;margin-bottom:18px}
    .section-subtitle{margin-bottom:20px}
    .results-header{padding:28px 16px 24px}
    .results-scenario{font-size:1.5rem}
    .btn-row{display:flex;flex-direction:column;gap:10px}
    .restart-btn,.share-btn{width:100%;justify-content:center;margin-right:0}
    .timeline-item{min-width:100px}
    .timeline-event{font-size:0.68rem;max-width:90px;min-height:36px}
    .prob-label{font-size:0.8rem}
    .reflection-item{padding:10px 14px;font-size:0.88rem}
    .reflection-quote{font-size:1.05rem}
    .country-select{padding:12px 14px;font-size:0.9rem}
    .year-slider{height:4px}
    .year-slider::-webkit-slider-thumb{width:26px;height:26px}
    .year-slider::-moz-range-thumb{width:26px;height:26px}
}
@media(max-width:380px){
    .stat-grid{grid-template-columns:1fr 1fr;gap:8px}
    .stat-card{padding:14px 10px}
    .stat-value{font-size:1.5rem}
    .stat-label{font-size:0.65rem}
    .compare-grid{grid-template-columns:1fr}
    .intro-title{font-size:2.2rem}
}
</style>
</head>
<body>

<!-- ==================== INTRO ==================== -->
<section id="intro">
<div class="intro-inner">
    <p class="intro-label">whatifs.fun presents</p>
    <h1 class="intro-title">If You Were Born <em>In…</em></h1>
    <p class="intro-subtitle">A life reimagined across time and place.</p>
    <p class="intro-desc">Choose a birth year and location to see projected life expectancy, historical events you'd live through, economic conditions, and technological milestones that would shape your world.</p>
    <div class="intro-inputs">
        <div class="input-group">
            <label class="input-label">Birth Year <span class="year-display" id="yearDisplay">1980</span></label>
            <input type="range" class="year-slider" id="yearSlider" min="1800" max="2025" value="1980" oninput="document.getElementById('yearDisplay').textContent=this.value">
        </div>
        <div class="input-group">
            <label class="input-label">Country</label>
            <select class="country-select" id="countrySelect"></select>
        </div>
    </div>
    <button class="simulate-btn" onclick="simulate()">Simulate Life</button>
</div>
<div class="intro-footer"><a href="https://whatifs.fun">whatifs.fun</a> &mdash; all data are estimates for educational exploration</div>
</section>

<!-- ==================== RESULTS ==================== -->
<section id="results">
<div class="results-header">
    <button class="results-back" onclick="backToIntro()">&larr; New scenario</button>
    <h1 class="results-scenario" id="scenarioTitle"></h1>
    <p class="results-note">Estimates based on historical data. Individual outcomes vary widely.</p>
</div>

<!-- Life Overview -->
<div class="section reveal" id="overviewSection">
    <h2 class="section-title">Life Overview</h2>
    <div class="stat-grid" id="statGrid"></div>
</div>

<!-- Timeline -->
<div class="section reveal" id="timelineSection">
    <h2 class="section-title">Your Lifetime Timeline</h2>
    <p class="section-subtitle">Events you would likely experience</p>
    <div class="timeline-container">
        <div class="timeline-scroll">
            <div class="timeline" id="timeline"></div>
        </div>
        <div class="timeline-legend">
            <span class="legend-war">Conflict</span>
            <span class="legend-econ">Economic</span>
            <span class="legend-tech">Technology</span>
            <span class="legend-life">Life milestone</span>
        </div>
    </div>
</div>

<!-- Probability -->
<div class="section reveal" id="probSection">
    <h2 class="section-title">Life Probability Indicators</h2>
    <p class="section-subtitle">Statistical likelihood based on era and location</p>
    <div class="prob-list" id="probList"></div>
</div>

<!-- Comparison -->
<div class="section reveal" id="compareSection">
    <h2 class="section-title">What If?</h2>
    <p class="section-subtitle">Compare with a different scenario</p>
    <div class="compare-container">
        <div class="compare-controls">
            <div class="compare-row">
                <span class="compare-label">Compare with birth year</span>
                <select class="compare-select" id="compareYear" onchange="updateComparison()"></select>
            </div>
            <div class="compare-row">
                <span class="compare-label">Compare with country</span>
                <select class="compare-select" id="compareCountry" onchange="updateComparison()"></select>
            </div>
        </div>
        <div class="compare-grid" id="compareGrid"></div>
    </div>
</div>

<!-- Reflection -->
<div class="section reveal" id="reflectionSection">
    <h2 class="section-title">Reflection</h2>
    <div class="reflection">
        <p style="font-size:0.85rem;color:var(--text3);margin-bottom:16px">You would likely experience:</p>
        <ul class="reflection-list" id="reflectionList"></ul>
        <p class="reflection-quote" id="reflectionQuote"></p>
        <div class="btn-row">
            <button class="restart-btn" onclick="backToIntro()">Try Another Scenario</button>
            <button class="share-btn" onclick="shareResult()">Share Result</button>
        </div>
    </div>
</div>
</section>

<script>
// =====================================================
//  DATA: 35 Countries with Life Expectancy by Decade
//  Sources: UN, World Bank, Our World in Data (simplified estimates)
// =====================================================
const COUNTRIES = {
"United States":{code:"US",le:{1800:39,1850:38,1900:47,1910:50,1920:54,1930:60,1940:63,1950:68,1960:70,1970:71,1980:74,1990:75,2000:77,2010:79,2020:77,2025:79},income:"high",region:"North America"},
"United Kingdom":{code:"GB",le:{1800:40,1850:40,1900:46,1910:52,1920:56,1930:60,1940:61,1950:69,1960:71,1970:72,1980:74,1990:76,2000:78,2010:81,2020:81,2025:81},income:"high",region:"Europe"},
"France":{code:"FR",le:{1800:33,1850:39,1900:45,1910:49,1920:51,1930:56,1940:55,1950:66,1960:70,1970:72,1980:74,1990:77,2000:79,2010:82,2020:82,2025:83},income:"high",region:"Europe"},
"Germany":{code:"DE",le:{1800:35,1850:37,1900:44,1910:49,1920:53,1930:60,1940:58,1950:67,1960:70,1970:71,1980:73,1990:76,2000:78,2010:80,2020:81,2025:81},income:"high",region:"Europe"},
"Japan":{code:"JP",le:{1800:34,1850:36,1900:44,1910:44,1920:43,1930:46,1940:46,1950:61,1960:68,1970:72,1980:76,1990:79,2000:81,2010:83,2020:85,2025:85},income:"high",region:"East Asia"},
"China":{code:"CN",le:{1800:32,1850:30,1900:32,1910:30,1920:28,1930:33,1940:36,1950:41,1960:44,1970:59,1980:66,1990:69,2000:72,2010:75,2020:78,2025:78},income:"upper-middle",region:"East Asia"},
"India":{code:"IN",le:{1800:25,1850:25,1900:23,1910:22,1920:21,1930:27,1940:32,1950:35,1960:42,1970:49,1980:55,1990:58,2000:63,2010:67,2020:70,2025:72},income:"lower-middle",region:"South Asia"},
"Brazil":{code:"BR",le:{1800:30,1850:32,1900:31,1910:33,1920:34,1930:37,1940:41,1950:51,1960:55,1970:59,1980:63,1990:67,2000:71,2010:74,2020:75,2025:76},income:"upper-middle",region:"South America"},
"Russia":{code:"RU",le:{1800:28,1850:30,1900:32,1910:34,1920:30,1930:40,1940:37,1950:64,1960:68,1970:69,1980:67,1990:64,2000:65,2010:69,2020:71,2025:72},income:"upper-middle",region:"Eurasia"},
"Australia":{code:"AU",le:{1800:34,1850:47,1900:55,1910:59,1920:63,1930:66,1940:67,1950:69,1960:71,1970:71,1980:74,1990:77,2000:79,2010:82,2020:83,2025:84},income:"high",region:"Oceania"},
"Canada":{code:"CA",le:{1800:38,1850:42,1900:50,1910:54,1920:57,1930:61,1940:64,1950:69,1960:71,1970:73,1980:75,1990:78,2000:79,2010:81,2020:82,2025:82},income:"high",region:"North America"},
"Mexico":{code:"MX",le:{1800:27,1850:26,1900:25,1910:24,1920:24,1930:33,1940:40,1950:50,1960:57,1970:62,1980:67,1990:71,2000:74,2010:75,2020:75,2025:75},income:"upper-middle",region:"North America"},
"Italy":{code:"IT",le:{1800:30,1850:32,1900:42,1910:46,1920:49,1930:56,1940:55,1950:66,1960:69,1970:72,1980:74,1990:77,2000:80,2010:82,2020:83,2025:84},income:"high",region:"Europe"},
"Spain":{code:"ES",le:{1800:28,1850:33,1900:35,1910:41,1920:42,1930:50,1940:47,1950:64,1960:69,1970:72,1980:76,1990:77,2000:79,2010:82,2020:83,2025:84},income:"high",region:"Europe"},
"South Korea":{code:"KR",le:{1800:24,1850:26,1900:28,1910:30,1920:33,1930:36,1940:42,1950:47,1960:53,1970:62,1980:66,1990:72,2000:76,2010:80,2020:83,2025:84},income:"high",region:"East Asia"},
"Nigeria":{code:"NG",le:{1800:26,1850:26,1900:24,1910:25,1920:26,1930:27,1940:30,1950:33,1960:38,1970:42,1980:45,1990:46,2000:47,2010:52,2020:55,2025:55},income:"lower-middle",region:"Africa"},
"South Africa":{code:"ZA",le:{1800:28,1850:29,1900:30,1910:34,1920:36,1930:38,1940:42,1950:45,1960:49,1970:54,1980:58,1990:62,2000:55,2010:56,2020:64,2025:65},income:"upper-middle",region:"Africa"},
"Egypt":{code:"EG",le:{1800:27,1850:28,1900:33,1910:31,1920:31,1930:36,1940:40,1950:42,1960:48,1970:52,1980:58,1990:64,2000:69,2010:71,2020:72,2025:72},income:"lower-middle",region:"North Africa"},
"Turkey":{code:"TR",le:{1800:28,1850:30,1900:30,1910:32,1920:28,1930:35,1940:38,1950:44,1960:50,1970:56,1980:62,1990:66,2000:71,2010:75,2020:78,2025:78},income:"upper-middle",region:"Eurasia"},
"Argentina":{code:"AR",le:{1800:30,1850:33,1900:40,1910:48,1920:52,1930:57,1940:61,1950:63,1960:65,1970:67,1980:70,1990:72,2000:74,2010:76,2020:76,2025:77},income:"upper-middle",region:"South America"},
"Sweden":{code:"SE",le:{1800:36,1850:43,1900:52,1910:57,1920:60,1930:63,1940:67,1950:72,1960:73,1970:75,1980:76,1990:78,2000:80,2010:82,2020:83,2025:83},income:"high",region:"Europe"},
"Netherlands":{code:"NL",le:{1800:34,1850:38,1900:49,1910:54,1920:58,1930:66,1940:62,1950:72,1960:74,1970:74,1980:76,1990:77,2000:78,2010:81,2020:82,2025:82},income:"high",region:"Europe"},
"Poland":{code:"PL",le:{1800:30,1850:32,1900:36,1910:38,1920:42,1930:48,1940:38,1950:61,1960:68,1970:70,1980:71,1990:71,2000:74,2010:77,2020:78,2025:78},income:"high",region:"Europe"},
"Indonesia":{code:"ID",le:{1800:25,1850:26,1900:28,1910:29,1920:29,1930:32,1940:35,1950:37,1960:42,1970:49,1980:55,1990:62,2000:66,2010:69,2020:72,2025:72},income:"upper-middle",region:"Southeast Asia"},
"Saudi Arabia":{code:"SA",le:{1800:26,1850:28,1900:30,1910:31,1920:32,1930:33,1940:36,1950:40,1960:46,1970:54,1980:64,1990:70,2000:73,2010:75,2020:76,2025:78},income:"high",region:"Middle East"},
"Thailand":{code:"TH",le:{1800:26,1850:28,1900:30,1910:32,1920:34,1930:36,1940:38,1950:48,1960:55,1970:60,1980:65,1990:70,2000:71,2010:74,2020:78,2025:79},income:"upper-middle",region:"Southeast Asia"},
"Vietnam":{code:"VN",le:{1800:25,1850:26,1900:28,1910:28,1920:29,1930:32,1940:30,1950:40,1960:48,1970:55,1980:62,1990:66,2000:73,2010:75,2020:76,2025:76},income:"lower-middle",region:"Southeast Asia"},
"Colombia":{code:"CO",le:{1800:27,1850:29,1900:30,1910:32,1920:34,1930:38,1940:42,1950:50,1960:57,1970:62,1980:67,1990:68,2000:72,2010:74,2020:77,2025:77},income:"upper-middle",region:"South America"},
"Kenya":{code:"KE",le:{1800:26,1850:26,1900:25,1910:28,1920:30,1930:32,1940:35,1950:40,1960:48,1970:53,1980:57,1990:55,2000:51,2010:62,2020:67,2025:67},income:"lower-middle",region:"Africa"},
"Pakistan":{code:"PK",le:{1800:25,1850:24,1900:25,1910:26,1920:24,1930:28,1940:31,1950:37,1960:45,1970:52,1980:57,1990:60,2000:63,2010:66,2020:67,2025:68},income:"lower-middle",region:"South Asia"},
"Iran":{code:"IR",le:{1800:27,1850:28,1900:28,1910:29,1920:30,1930:33,1940:37,1950:44,1960:50,1970:55,1980:58,1990:66,2000:71,2010:75,2020:77,2025:77},income:"upper-middle",region:"Middle East"},
"Philippines":{code:"PH",le:{1800:26,1850:28,1900:27,1910:28,1920:30,1930:38,1940:40,1950:48,1960:55,1970:58,1980:62,1990:66,2000:68,2010:69,2020:72,2025:72},income:"lower-middle",region:"Southeast Asia"},
"Ethiopia":{code:"ET",le:{1800:25,1850:25,1900:24,1910:24,1920:26,1930:28,1940:30,1950:34,1960:38,1970:42,1980:44,1990:46,2000:52,2010:62,2020:67,2025:67},income:"low",region:"Africa"},
"Bangladesh":{code:"BD",le:{1800:25,1850:24,1900:23,1910:24,1920:22,1930:27,1940:31,1950:37,1960:42,1970:45,1980:54,1990:59,2000:65,2010:70,2020:73,2025:73},income:"lower-middle",region:"South Asia"},
"Norway":{code:"NO",le:{1800:38,1850:44,1900:52,1910:57,1920:59,1930:64,1940:66,1950:72,1960:74,1970:74,1980:76,1990:77,2000:79,2010:81,2020:83,2025:84},income:"high",region:"Europe"},
};

// =====================================================
//  GLOBAL EVENTS TIMELINE
// =====================================================
const EVENTS = [
{y:1815,e:"End of Napoleonic Wars",t:"war"},{y:1825,e:"First passenger railway",t:"tech"},
{y:1837,e:"Telegraph invented",t:"tech"},{y:1848,e:"Revolutions across Europe",t:"war"},
{y:1861,e:"US Civil War begins",t:"war"},{y:1869,e:"Suez Canal opens",t:"econ"},
{y:1876,e:"Telephone invented",t:"tech"},{y:1879,e:"Light bulb invented",t:"tech"},
{y:1886,e:"First automobile",t:"tech"},{y:1893,e:"Global financial panic",t:"econ"},
{y:1903,e:"First powered flight",t:"tech"},{y:1914,e:"World War I begins",t:"war"},
{y:1918,e:"Spanish Flu pandemic",t:"life"},{y:1920,e:"Radio broadcasting begins",t:"tech"},
{y:1929,e:"Great Depression begins",t:"econ"},{y:1939,e:"World War II begins",t:"war"},
{y:1945,e:"Atomic bomb / WWII ends",t:"war"},{y:1947,e:"Indian independence",t:"life"},
{y:1950,e:"Korean War begins",t:"war"},{y:1953,e:"DNA structure discovered",t:"tech"},
{y:1957,e:"Sputnik launched",t:"tech"},{y:1961,e:"First human in space",t:"tech"},
{y:1963,e:"MLK's March on Washington",t:"life"},{y:1969,e:"Moon landing",t:"tech"},
{y:1971,e:"Nixon ends gold standard",t:"econ"},{y:1973,e:"Oil crisis",t:"econ"},
{y:1979,e:"Iranian Revolution",t:"war"},{y:1981,e:"IBM Personal Computer",t:"tech"},
{y:1989,e:"Fall of the Berlin Wall",t:"life"},{y:1991,e:"Soviet Union dissolves",t:"life"},
{y:1993,e:"World Wide Web goes public",t:"tech"},{y:1997,e:"Asian financial crisis",t:"econ"},
{y:2001,e:"September 11 attacks",t:"war"},{y:2004,e:"Facebook founded",t:"tech"},
{y:2007,e:"iPhone released",t:"tech"},{y:2008,e:"Global financial crisis",t:"econ"},
{y:2010,e:"Arab Spring begins",t:"life"},{y:2011,e:"Fukushima disaster",t:"life"},
{y:2016,e:"AlphaGo beats world champion",t:"tech"},{y:2020,e:"COVID-19 pandemic",t:"life"},
{y:2022,e:"ChatGPT released",t:"tech"},{y:2024,e:"AI era accelerates",t:"tech"},
];

// =====================================================
//  HELPERS
// =====================================================
function getLE(country, year) {
    const le = COUNTRIES[country].le;
    const decades = Object.keys(le).map(Number).sort((a,b)=>a-b);
    if (year <= decades[0]) return le[decades[0]];
    if (year >= decades[decades.length-1]) return le[decades[decades.length-1]];
    for (let i = 0; i < decades.length - 1; i++) {
        if (year >= decades[i] && year <= decades[i+1]) {
            const ratio = (year - decades[i]) / (decades[i+1] - decades[i]);
            return Math.round(le[decades[i]] + ratio * (le[decades[i+1]] - le[decades[i]]));
        }
    }
    return 70;
}

function getTechEra(year) {
    if (year < 1760) return "Pre-Industrial";
    if (year < 1870) return "Industrial";
    if (year < 1920) return "Electrical";
    if (year < 1970) return "Atomic / Space";
    if (year < 1995) return "Information";
    if (year < 2020) return "Digital / Internet";
    return "AI / Post-Digital";
}

function getIncomePercentile(country, year) {
    const inc = COUNTRIES[country].income;
    const base = inc === "high" ? 78 : inc === "upper-middle" ? 52 : inc === "lower-middle" ? 28 : 12;
    const eraBonus = year < 1900 ? -15 : year < 1950 ? -8 : year < 2000 ? 0 : 5;
    return Math.max(5, Math.min(97, base + eraBonus + Math.round((Math.random()-0.5)*6)));
}

function getEducationIndex(country, year) {
    const inc = COUNTRIES[country].income;
    const base = inc === "high" ? 0.88 : inc === "upper-middle" ? 0.68 : inc === "lower-middle" ? 0.45 : 0.28;
    if (year < 1850) return Math.max(0.05, base - 0.55);
    if (year < 1900) return Math.max(0.1, base - 0.4);
    if (year < 1950) return Math.max(0.15, base - 0.2);
    if (year < 2000) return Math.max(0.3, base - 0.05);
    return Math.min(0.98, base + 0.05);
}

function getConflictProb(country, year) {
    const deathYear = year + getLE(country, year);
    let prob = 15;
    const wars = [[1914,1918],[1939,1945],[1950,1953],[1965,1975],[1979,1989],[2001,2021],[2022,2030]];
    wars.forEach(([s,e]) => { if (year <= e && deathYear >= s) prob += 12; });
    return Math.min(95, prob);
}

function getProbs(country, year) {
    const le = getLE(country, year);
    const inc = COUNTRIES[country].income;
    const pastSeventy = le >= 70 ? Math.min(88, 50 + (le - 70) * 3) : Math.max(5, le - 20);
    const computer = year + le > 1985 ? Math.min(95, (inc==="high"?85:inc==="upper-middle"?60:inc==="lower-middle"?35:15) + (year > 1980 ? 10 : 0)) : 2;
    const poverty = inc === "high" ? (year<1900?40:year<1950?15:4) : inc === "upper-middle" ? (year<1900?70:year<1950?55:year<2000?30:12) : inc === "lower-middle" ? (year<1900?85:year<1950?75:year<2000?55:25) : (year<1900?92:year<1950?88:year<2000?70:40);
    const education = Math.round(getEducationIndex(country, year) * 100);
    const conflict = getConflictProb(country, year);
    return { pastSeventy, computer, poverty, education, conflict };
}

function countRecessions(year, deathYear) {
    const recessions = [1825,1837,1857,1873,1893,1907,1929,1937,1973,1980,1990,2001,2008,2020];
    return recessions.filter(r => r >= year && r <= deathYear).length;
}

function countTechRevolutions(year, deathYear) {
    const revs = [1825,1876,1903,1920,1957,1969,1981,1993,2007,2022];
    return revs.filter(r => r >= year && r <= deathYear).length;
}

function countPoliticalShifts(year, deathYear) {
    const shifts = [1848,1861,1914,1917,1945,1947,1963,1989,1991,2001,2010,2020];
    return shifts.filter(s => s >= year && s <= deathYear).length;
}

// =====================================================
//  POPULATE
// =====================================================
const countrySelect = document.getElementById('countrySelect');
Object.keys(COUNTRIES).sort().forEach(c => {
    const opt = document.createElement('option');
    opt.value = c; opt.textContent = c;
    if (c === "United States") opt.selected = true;
    countrySelect.appendChild(opt);
});

// =====================================================
//  SIMULATE
// =====================================================
let currentYear, currentCountry;

function simulate() {
    currentYear = parseInt(document.getElementById('yearSlider').value);
    currentCountry = document.getElementById('countrySelect').value;
    const le = getLE(currentCountry, currentYear);
    const deathYear = currentYear + le;
    const techEra = getTechEra(currentYear);
    const incPerc = getIncomePercentile(currentCountry, currentYear);
    const eduIdx = getEducationIndex(currentCountry, currentYear);
    const conflictProb = getConflictProb(currentCountry, currentYear);
    const probs = getProbs(currentCountry, currentYear);

    // Scenario title
    document.getElementById('scenarioTitle').innerHTML =
        `Born in <em>${currentYear}</em> in <em>${currentCountry}</em>`;

    // Stat cards
    document.getElementById('statGrid').innerHTML = `
        <div class="stat-card accent"><div class="stat-value">${le}</div><div class="stat-unit">years</div><div class="stat-label">Life Expectancy</div></div>
        <div class="stat-card"><div class="stat-value">${incPerc}<span style="font-size:1rem">th</span></div><div class="stat-unit">percentile</div><div class="stat-label">Global Income Level</div></div>
        <div class="stat-card teal"><div class="stat-value">${(eduIdx).toFixed(2)}</div><div class="stat-unit">index</div><div class="stat-label">Education Access</div></div>
        <div class="stat-card"><div class="stat-value">${conflictProb}%</div><div class="stat-unit">probability</div><div class="stat-label">Major Conflict Exposure</div></div>
        <div class="stat-card"><div class="stat-value" style="font-size:1.3rem">${techEra}</div><div class="stat-unit">born into</div><div class="stat-label">Technological Era</div></div>
        <div class="stat-card"><div class="stat-value">${currentYear}–${Math.min(deathYear, 2100)}</div><div class="stat-unit">projected span</div><div class="stat-label">Lifetime Range</div></div>
    `;

    // Timeline
    buildTimeline(currentYear, deathYear);

    // Probabilities
    buildProbBars(probs);

    // Comparison
    buildComparison(currentYear, currentCountry);

    // Reflection
    buildReflection(currentYear, currentCountry, le, deathYear);

    // Show results
    document.getElementById('intro').style.display = 'none';
    document.getElementById('results').classList.add('active');
    window.scrollTo(0, 0);

    // Trigger reveal animations
    setTimeout(() => {
        document.querySelectorAll('.reveal').forEach((el, i) => {
            setTimeout(() => el.classList.add('visible'), i * 150);
        });
        // Animate probability bars
        setTimeout(() => {
            document.querySelectorAll('.prob-fill').forEach(bar => {
                bar.style.width = bar.dataset.width + '%';
            });
        }, 600);
    }, 100);
}

function buildTimeline(birthYear, deathYear) {
    const tl = document.getElementById('timeline');
    tl.innerHTML = '';
    const relevant = EVENTS.filter(ev => ev.y >= birthYear - 5 && ev.y <= Math.min(deathYear + 5, 2030));

    // Add birth marker
    const items = [{y: birthYear, e: "You are born", t: "life", isBirth: true}];
    relevant.forEach(ev => { if (ev.y !== birthYear) items.push(ev); });

    // Add milestones
    if (birthYear + 18 <= deathYear) items.push({y: birthYear + 18, e: "Turn 18", t: "life"});
    if (birthYear + 30 <= deathYear) items.push({y: birthYear + 30, e: "Turn 30", t: "life"});
    if (birthYear + 50 <= deathYear) items.push({y: birthYear + 50, e: "Turn 50", t: "life"});
    if (birthYear + 65 <= deathYear) items.push({y: birthYear + 65, e: "Turn 65", t: "life"});
    if (deathYear <= 2100) items.push({y: deathYear, e: "Projected end of life", t: "life"});

    items.sort((a, b) => a.y - b.y);

    // Remove duplicates close together
    const filtered = [];
    items.forEach(item => {
        if (filtered.length === 0 || Math.abs(item.y - filtered[filtered.length-1].y) >= 2 || item.isBirth) {
            filtered.push(item);
        }
    });

    filtered.forEach(item => {
        const div = document.createElement('div');
        div.className = `timeline-item ${item.t}`;
        div.innerHTML = `
            <div class="timeline-event">${item.e}</div>
            <div class="timeline-marker"></div>
            <div class="timeline-year">${item.y}</div>
            ${item.isBirth ? '<div class="timeline-birth">BIRTH</div>' : ''}
        `;
        tl.appendChild(div);
    });
}

function buildProbBars(probs) {
    const list = document.getElementById('probList');
    const items = [
        {label: "Living past age 70", value: probs.pastSeventy, color: "blue"},
        {label: "Access to higher education", value: probs.education, color: "teal"},
        {label: "Owning a personal computer", value: probs.computer, color: "teal"},
        {label: "Experiencing major global conflict", value: probs.conflict, color: "rose"},
        {label: "Living in extreme poverty at some point", value: probs.poverty, color: "amber"},
    ];
    list.innerHTML = items.map(it => `
        <div class="prob-item">
            <div class="prob-header">
                <span class="prob-label">${it.label}</span>
                <span class="prob-value">${it.value}%</span>
            </div>
            <div class="prob-track">
                <div class="prob-fill ${it.color}" data-width="${it.value}"></div>
            </div>
        </div>
    `).join('');
}

function buildComparison(year, country) {
    // Year selector
    const yearSel = document.getElementById('compareYear');
    yearSel.innerHTML = '';
    const offsets = [-100, -50, -25, 0, 25, 50];
    offsets.forEach(off => {
        const y = year + off;
        if (y >= 1800 && y <= 2025) {
            const opt = document.createElement('option');
            opt.value = y;
            opt.textContent = y + (off === 0 ? ' (current)' : ` (${off > 0 ? '+' : ''}${off} years)`);
            if (off === -50) opt.selected = true;
            yearSel.appendChild(opt);
        }
    });

    // Country selector
    const cSel = document.getElementById('compareCountry');
    cSel.innerHTML = '';
    Object.keys(COUNTRIES).sort().forEach(c => {
        const opt = document.createElement('option');
        opt.value = c; opt.textContent = c;
        if (c === country) opt.selected = true;
        cSel.appendChild(opt);
    });

    updateComparison();
}

function updateComparison() {
    const compYear = parseInt(document.getElementById('compareYear').value);
    const compCountry = document.getElementById('compareCountry').value;

    const le1 = getLE(currentCountry, currentYear);
    const le2 = getLE(compCountry, compYear);
    const inc1 = getIncomePercentile(currentCountry, currentYear);
    const inc2 = getIncomePercentile(compCountry, compYear);
    const edu1 = getEducationIndex(currentCountry, currentYear);
    const edu2 = getEducationIndex(compCountry, compYear);
    const conf1 = getConflictProb(currentCountry, currentYear);
    const conf2 = getConflictProb(compCountry, compYear);

    function diffStr(a, b, unit, invert) {
        const d = b - a;
        if (Math.abs(d) < 1) return `<span class="diff-neutral">No significant change</span>`;
        const cls = invert ? (d > 0 ? 'diff-negative' : 'diff-positive') : (d > 0 ? 'diff-positive' : 'diff-negative');
        return `<span class="${cls}">${d > 0 ? '+' : ''}${typeof a === 'number' && a % 1 !== 0 ? d.toFixed(2) : Math.round(d)} ${unit}</span>`;
    }

    document.getElementById('compareGrid').innerHTML = `
        <div class="compare-card">
            <div class="compare-card-label">Life Expectancy</div>
            <div class="compare-card-value">${le2} yrs</div>
            <div class="compare-card-diff">${diffStr(le1, le2, 'years')}</div>
        </div>
        <div class="compare-card">
            <div class="compare-card-label">Income Percentile</div>
            <div class="compare-card-value">${inc2}th</div>
            <div class="compare-card-diff">${diffStr(inc1, inc2, 'percentile')}</div>
        </div>
        <div class="compare-card">
            <div class="compare-card-label">Education Access</div>
            <div class="compare-card-value">${edu2.toFixed(2)}</div>
            <div class="compare-card-diff">${diffStr(edu1, edu2, 'index pts')}</div>
        </div>
        <div class="compare-card">
            <div class="compare-card-label">Conflict Exposure</div>
            <div class="compare-card-value">${conf2}%</div>
            <div class="compare-card-diff">${diffStr(conf1, conf2, 'pp', true)}</div>
        </div>
    `;
}

function buildReflection(year, country, le, deathYear) {
    const recessions = countRecessions(year, deathYear);
    const techRevs = countTechRevolutions(year, deathYear);
    const polShifts = countPoliticalShifts(year, deathYear);

    document.getElementById('reflectionList').innerHTML = `
        <li class="reflection-item"><strong>${recessions}</strong> global economic recessions</li>
        <li class="reflection-item"><strong>${techRevs}</strong> major technological revolutions</li>
        <li class="reflection-item"><strong>${polShifts}</strong> significant political shifts</li>
    `;

    const quotes = [
        `In ${year} ${country}, average life expectancy was ${le} years. The world you entered would shape everything that followed.`,
        `Born in ${year}, your life in ${country} would span ${le} years of profound change and quiet continuity.`,
        `Your life trajectory — shaped by the convergence of ${year} and ${country} — would unfold across ${le} years of human history.`,
    ];
    document.getElementById('reflectionQuote').textContent = quotes[Math.floor(Math.random()*quotes.length)];
}

function backToIntro() {
    document.getElementById('results').classList.remove('active');
    document.getElementById('intro').style.display = 'flex';
    document.querySelectorAll('.reveal').forEach(el => el.classList.remove('visible'));
    window.scrollTo(0, 0);
}

function shareResult() {
    const le = getLE(currentCountry, currentYear);
    const text = `If I were born in ${currentYear} in ${currentCountry}, my life expectancy would be ${le} years. Explore your own scenario at whatifs.fun/if-you-were-born-in/`;
    if (navigator.share) {
        navigator.share({ text }).catch(() => {});
    } else {
        navigator.clipboard.writeText(text).then(() => {
            const btn = document.querySelector('.share-btn');
            btn.textContent = 'Copied to clipboard';
            setTimeout(() => { btn.textContent = 'Share Result'; }, 2000);
        });
    }
}
</script>
</body>
</html>
